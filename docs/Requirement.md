# 贪吃蛇小游戏需求说明文档

## 1. 文档信息

| 项目名称       | 贪吃蛇小游戏               |
|----------------|----------------------------|
| 文档版本       | V1.0                       |
| 编制日期       | [当前日期，如 2025-11-17]  |
| 编制人         | [你的姓名 / 团队名]        |
| 审批人         | [暂空 / 相关人员]          |
| 修订记录       | 版本号 \| 日期 \| 修订内容 \| 修订人（首次创建暂空） |


## 2. 引言

### 2.1 项目背景
贪吃蛇是经典休闲游戏，本项目旨在基于 Python 开发一款支持多模式的贪吃蛇游戏，满足单人娱乐、本地对战及联网互动需求，提升游戏趣味性和社交属性。

### 2.2 文档目的
明确游戏的功能范围、交互逻辑、性能要求及验收标准，作为开发、测试和验收的基准，确保开发目标与用户需求一致。

### 2.3 范围定义
- **包含功能**：  
  蛇头移动控制、食物生成与碰撞检测、蛇身长度增长、本地人机对战、双人联网对战、分数统计。  
- **不包含功能**：  
  复杂角色皮肤系统、音效自定义、跨平台同步（仅支持同系统联网）。

### 2.4 参考资料
- 经典贪吃蛇游戏核心逻辑（蛇身移动、碰撞判定）  
- Python 游戏开发库文档（如 Pygame、Pyglet）  
- 网络通信库参考（如 Socket、WebSocket）  


## 3. 术语与缩略语

| 术语 / 缩略语 | 说明 |
|--------------|------|
| 蛇头         | 贪吃蛇可控制的头部（碰撞检测核心） |
| 蛇身         | 随食物获取增长的身体部分（跟随蛇头移动） |
| 本地对战     | 同一设备上的人机 / 双人对抗（共享屏幕） |
| 联网对战     | 不同设备通过网络连接的双人对抗 |


## 4. 用户与场景分析

### 4.1 用户角色

| 角色名称   | 职责描述 | 典型操作场景 |
|------------|----------|--------------|
| 单人玩家   | 控制单条蛇进行游戏 | 键盘方向键移动蛇头，吃食物增长分数 |
| 本地玩家 1 | 本地对战中控制第一条蛇 | 使用 WASD 键移动，与玩家 2/AI 竞争 |
| 本地玩家 2 | 本地对战中控制第二条蛇 | 使用方向键移动，与玩家 1 竞争 |
| 联网玩家   | 通过网络参与双人对战 | 输入对方 IP / 房间号，加入对战 |

### 4.2 典型场景
- **单人模式**：玩家打开游戏→选择 “单人模式”→键盘控制蛇头移动→吃食物增长→撞到边界 / 自身则游戏结束→显示最终分数。  
- **本地人机对战**：玩家选择 “本地对战 - 人机”→控制蛇头与 AI 蛇竞争食物→先撞墙 / 自身的一方失败→显示胜负结果。  
- **双人联网对战**：玩家 A 创建房间→玩家 B 输入房间号加入→双方分别控制蛇头→一方失败则另一方获胜→同步显示对战过程。  


## 5. 功能需求

### 5.1 核心游戏功能

#### 5.1.1 蛇头移动控制
- 输入：单人 / 本地对战用键盘（方向键 / WASD），支持连续按键加速移动。  
- 规则：蛇头只能向当前方向的前、左、右移动（不可直接反向移动，如向上时不能直接向下）。  
- 输出：蛇头位置实时更新，蛇身跟随移动（每帧移动一个单位长度）。

#### 5.1.2 食物生成与碰撞
- 食物生成：随机在游戏地图空白区域生成（不与蛇身重叠），颜色与蛇身区分。  
- 碰撞检测：蛇头坐标与食物坐标重合时，判定为 “吃到食物”。  
- 反馈：食物消失，蛇身长度 + 1，分数 + 10（可配置），同时生成新食物。

#### 5.1.3 失败判定
- 碰撞边界：蛇头触碰到游戏地图边缘（可配置 “穿墙模式” 关闭此判定）。  
- 碰撞自身：蛇头与自身蛇身坐标重合。  
- 碰撞对手（对战模式）：蛇头与对方蛇身坐标重合（对方获胜）。  
- 反馈：失败方蛇身变色 / 闪烁，显示 “失败” 提示，游戏结束或重新开始。

### 5.2 游戏模式功能

#### 5.2.1 单人模式
- 核心流程：初始化单条蛇→自动生成食物→玩家控制移动→记录分数→失败后显示 “最高分”（本地存储）。  
- 附加功能：暂停 / 继续（按 P 键）、重新开始（按 R 键）。

#### 5.2.2 本地人机对战
- AI 逻辑：AI 蛇优先向最近的食物移动，避免碰撞自身和边界（难度可设：简单 / 中等 / 困难，影响反应速度）。  
- 界面：分屏或同屏显示两条蛇（颜色区分），实时显示双方分数。  
- 胜负判定：先失败的一方为输，另一方为赢（平局：同时失败）。

#### 5.2.3 双人联网对战
- 房间创建：玩家可作为 “主机” 创建房间（生成唯一房间号），配置对战地图大小。  
- 加入房间：另一玩家输入房间号 + 主机 IP（局域网），连接成功后同步游戏状态。  
- 数据同步：实时传输双方蛇头位置、食物位置、分数（延迟≤300ms）。  
- 断线处理：一方断线时，另一方显示 “对手已离开”，游戏结束。  


## 6. 非功能需求

### 6.1 性能需求
- 帧率：稳定在 30FPS 以上（确保移动流畅）。  
- 联网延迟：局域网内对战延迟≤300ms，超过 500ms 提示 “网络不稳定”。  
- 资源占用：内存≤100MB，CPU 占用≤20%（普通 PC）。

### 6.2 易用性需求
- 操作简洁：首次打开显示按键说明（可关闭），游戏中按 H 键查看帮助。  
- 界面直观：分数、模式、状态（暂停 / 对战中）清晰显示，蛇身与食物颜色对比明显。

### 6.3 兼容性需求
- 运行环境：支持 Python 3.8+，Windows 10+/macOS 12 + 系统。  
- 依赖库：明确需要安装的库（如 Pygame 2.1.0+、socket 库）。  


## 7. 数据需求

### 7.1 本地存储数据
- 单人模式最高分：记录玩家 ID（可选）、分数、日期，支持查看历史 Top3。  
- 配置信息：默认按键设置、地图大小（如 400×400 像素）、音效开关（若后续添加）。

### 7.2 联网传输数据
- 实时数据：蛇头坐标（x,y）、蛇身长度、移动方向、当前分数。  
- 控制指令：移动方向变更（如 “上 / 下 / 左 / 右”）、重新开始请求。  


## 8. 验收标准
- 所有核心功能（移动、吃食物、增长、失败判定）100% 实现，无明显 BUG。  
- 本地对战中 AI 逻辑正常（不出现原地打转、主动撞墙等异常）。  
- 联网对战在局域网内稳定连接，操作延迟可接受（玩家无明显卡顿感）。  
- 单人模式最高分正确存储和显示，重启游戏后数据不丢失。  


## 9. 约束与假设
- **技术约束**：使用 Pygame 库开发图形界面，Socket 实现局域网联网。  
- **时间约束**：核心功能 1-2 周完成，联网功能 1 周完成，测试优化 1 周。  
- **假设条件**：玩家具备基础 Python 环境配置能力，联网对战在同一局域网内进行。